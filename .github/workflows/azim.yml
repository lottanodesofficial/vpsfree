name: VPS 24/7

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 43200  # 30 days max (GitHub limit)

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run VPS (24/7 with SSHX)
        run: |
          # Start SSHx and extract link
          LINK=$(curl -sSf https://sshx.io/get | sh | grep -Eo 'https://sshx\.io/[a-zA-Z0-9]+')
          
          # Show the SSHx link 10 times
          for i in {1..10}; do
            echo "ðŸ”— SSHX Link #$i: $LINK"
            sleep 2
          done
          
          echo "âœ… VPS is now live and will stay running 24/7."
          echo "Keep this workflow open to maintain the session."

          # Keep VPS alive indefinitely
          while true; do
            echo "ðŸ’¤ VPS heartbeat â€” still running..."
            sleep 300
          done
